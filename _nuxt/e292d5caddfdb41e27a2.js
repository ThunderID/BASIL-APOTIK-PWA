(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{420:function(t,e,r){"use strict";r.r(e);r(33),r(79);var c=r(24),n=r(65),o=r.n(n),d=r(306),l=r.n(d),_=r(1),v=r(311),h=r(312);_.a.filter("formatNumber",(function(t){return l()(t).format("0,0")}));var m,f,x,P="http://128.199.145.173:7173/graphql",k={mixins:[v.validationMixin],validations:{name:{required:h.required},upc:{required:h.required},select:{required:h.required},initialstock:{required:h.required,numeric:h.numeric},hpp:{required:h.required,numeric:h.numeric},threshold:{required:h.required,numeric:h.numeric},unit:{},description:{},price_update:{required:h.required,numeric:h.numeric},discount_update:{required:h.required,numeric:h.numeric}},computed:{priceUpdateErrors:function(){var t=[];return this.$v.price_update.$dirty?(!this.$v.price_update.numeric&&t.push("Price must be numeric type"),!this.$v.price_update.required&&t.push("Price is required."),t):t},discountUpdateErrors:function(){var t=[];return this.$v.discount_update.$dirty?(!this.$v.discount_update.numeric&&t.push("Discount must be numeric type"),!this.$v.discount_update.required&&t.push("Discount is required."),t):t}},methods:{saveUpdatePrice:(x=Object(c.a)(regeneratorRuntime.mark((function t(){var e,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$v.$touch(),e=!1,this.priceUpdateErrors.length>0&&(e=!0),this.discountUpdateErrors.length>0&&(e=!0),e){t.next=36;break}if(!confirm("Are you sure the data is filled correctly?")){t.next=36;break}if(console.log(this.id_product),console.log(this.price_update),console.log(this.price_active_at),console.log(this.discount_update),t.prev=10,this.status_update){t.next=20;break}return t.next=14,o()({method:"POST",url:P,data:{query:"\n                            mutation{\n                              StoreProductPrice(\n                                product_id:".concat(this.id_product,",\n                                price:").concat(this.price_update,',\n                                active_at:"').concat(this.price_active_at,'",\n                                discount:').concat(this.discount_update,"\n                              ){\n                                id,\n                                active_at,\n                                price,\n                                discount\n                              }\n                            }\n                            ")}});case 14:r=t.sent,c=r.data.data.StoreProductPrice,this.productPrices.push(c),alert("Success to add new price"),t.next=29;break;case 20:return t.next=22,o()({method:"POST",url:P,data:{query:"\n                            mutation{\n                              StoreProductPrice(\n                                product_id:".concat(this.id_product,",\n                                id:").concat(this.id_price,",\n                                price:").concat(this.price_update,',\n                                active_at:"').concat(this.price_active_at,'",\n                                discount:').concat(this.discount_update,"\n                              ){\n                                id,\n                                active_at,\n                                price,\n                                discount\n                              }\n                            }\n                            ")}});case 22:r=t.sent,c=r.data.data.StoreProductPrice,console.log(this.index_update),console.log(this.productPrices[this.index_update]),this.productPrices.splice(this.index_update,1,c),console.log(this.productPrices),alert("Success to add new price");case 29:this.closeDialogUpdatePrice(),t.next=36;break;case 32:t.prev=32,t.t0=t.catch(10),console.log(t.t0),alert("Oops Something Went Wrong!");case 36:case"end":return t.stop()}}),t,this,[[10,32]])}))),function(){return x.apply(this,arguments)}),closeDialogUpdatePrice:function(){this.dialogUpdatePrice=!1},openDialogAddNewPrice:function(){this.dialogUpdatePrice=!0,this.status_update=!1,this.id_price=null,this.price_update=0,this.discount_update=0,this.price_active_at=this.nowDate,this.index_update=-1},openDialogUpdatePrice:function(t){var e=t.item;this.index_update=t.index,this.dialogUpdatePrice=!0,this.status_update=!0,this.id_price=e.id,this.price_update=e.price,this.discount_update=e.discount,this.price_active_at=e.active_at.slice(0,10)},closeActiveAtDialog:function(){this.modal_active_at=!1},onButtonUpdateClick:function(t){this.openDialogUpdatePrice(t)},onButtonDeleteClick:(f=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete this price?")){t.next=13;break}return t.prev=1,t.next=4,o()({method:"POST",url:P,data:{query:"\n                        mutation{\n                          DeleteProductPrice(id:".concat(e.item.id,")\n                        }\n                        ")}});case 4:t.sent.data.data.DeleteProductPrice?(this.productPrices.splice(e.index,1),alert("Success to delete price")):alert("Failed to delete price"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),alert("Oops Something Went Wrong!");case 13:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(t){return f.apply(this,arguments)})},asyncData:function(t){var e=t.params;return{product_name:"waiting for data...",index_update:-1,status_update:!1,id_price:null,discount_update:0,price_update:0,nowDate:(new Date).toISOString().slice(0,10),dialogUpdatePrice:!1,modal_active_at:!1,price_active_at:(new Date).toISOString().slice(0,10),id_product:e.id,search:"",headers:[{text:"Price",align:"left",value:"price"},{text:"Discount",align:"left",value:"discount"},{text:"Active At",align:"left",value:"active_at"},{text:"Utility",align:"left",value:"utility"}],productPrices:[]}},mounted:(m=Object(c.a)(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o()({method:"POST",url:P,data:{query:"\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tProductPrices(product_id:".concat(this.id_product,',order_by:"active_at",order_desc:false){\n\t\t\t\t\t\t\t    data{\n\t\t\t\t\t\t\t      id,\n\t\t\t\t\t\t\t      price,\n\t\t\t\t\t\t\t\t\t\tdiscount,\n\t\t\t\t\t\t\t\t\t\tactive_at\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t')}});case 3:e=t.sent,console.log(this.id_product),this.productPrices=e.data.data.ProductPrices.data,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:return t.prev=11,t.next=14,o()({method:"POST",url:P,data:{query:"\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tProducts(id:".concat(this.id_product,"){\n\t\t\t\t\t\t\t    data{\n\t\t\t\t\t\t\t      code,\n                    name,\n                    group,\n                    description\n\t\t\t\t\t\t\t    }\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t")}});case 14:r=t.sent,this.product_name=r.data.data.Products.data[0].name,t.next=20;break;case 18:t.prev=18,t.t1=t.catch(11);case 20:case"end":return t.stop()}}),t,this,[[0,8],[11,18]])}))),function(){return m.apply(this,arguments)})},y=r(57),w=r(80),D=r.n(w),U=r(120),S=r(317),$=r(299),A=r(411),V=r(291),O=r(414),C=r(413),T=r(412),E=r(366),N=r(367),R=r(295),j=r(315),component=Object(y.a)(k,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",{attrs:{column:"","justify-center":"","ml-xs-5":"","ml-md-5":"","mr-xs-5":"","mr-md-5":""}},[r("v-row",[r("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.openDialogAddNewPrice}},[t._v("Add New Price")])],1),t._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialogUpdatePrice,callback:function(e){t.dialogUpdatePrice=e},expression:"dialogUpdatePrice"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("Add New Price")])]),t._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Price*","error-messages":t.priceUpdateErrors,required:""},on:{input:function(e){return t.$v.price_update.$touch()},blur:function(e){return t.$v.price_update.$touch()}},model:{value:t.price_update,callback:function(e){t.price_update=e},expression:"price_update"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[r("v-text-field",{attrs:{label:"Discount*","error-messages":t.discountUpdateErrors},on:{input:function(e){return t.$v.discount_update.$touch()},blur:function(e){return t.$v.discount_update.$touch()}},model:{value:t.discount_update,callback:function(e){t.discount_update=e},expression:"discount_update"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[r("v-dialog",{ref:"dialog",attrs:{"return-value":t.price_active_at,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.price_active_at=e},"update:return-value":function(e){t.price_active_at=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var c=e.on;return[r("v-text-field",t._g({attrs:{label:"Active At*","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.price_active_at,callback:function(e){t.price_active_at=e},expression:"price_active_at"}},c))]}}]),model:{value:t.modal_active_at,callback:function(e){t.modal_active_at=e},expression:"modal_active_at"}},[t._v(" "),r("v-date-picker",{attrs:{color:"primary",min:t.nowDate,scrollable:""},model:{value:t.price_active_at,callback:function(e){t.price_active_at=e},expression:"price_active_at"}},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.closeActiveAtDialog}},[t._v("Cancel")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialog.save(t.price_active_at)}}},[t._v("OK")])],1)],1)],1)],1)],1),t._v(" "),r("small",[t._v("*indicates required field")])],1),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDialogUpdatePrice}},[t._v("Close")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.saveUpdatePrice}},[t._v("Save")])],1)],1)],1),t._v(" "),r("v-row",[r("v-layout",{attrs:{"child-flex":"","mt-md-5":"","mt-xs-5":""}},[r("v-card",{attrs:{width:"100%"}},[r("v-card-title",[r("v-layout",[r("h3",[t._v("Product Prices History"),r("br"),r("h6",[t._v("Product : "+t._s(t.product_name))])])]),t._v(" "),r("v-spacer"),t._v(" "),r("v-text-field",{attrs:{"append-icon":"mdi-card-search-outline",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("v-data-table",{attrs:{headers:t.headers,items:t.productPrices,search:t.search},scopedSlots:t._u([{key:"item",fn:function(e){return[r("tr",[r("td",[t._v(t._s(t._f("formatNumber")(e.item.price)))]),t._v(" "),r("td",[t._v(t._s(t._f("formatNumber")(e.item.discount)))]),t._v(" "),r("td",[t._v(t._s(e.item.active_at.slice(0,10)))]),t._v(" "),e.item.active_at.slice(0,10)>t.nowDate?r("td",[r("v-btn",{attrs:{color:"primary"},on:{click:function(r){return t.onButtonUpdateClick(e)}}},[t._v("\n                    Update\n                ")]),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(r){return t.onButtonDeleteClick(e)}}},[t._v("\n                    Delete\n                ")])],1):r("td",[t._v(t._s("Already Active"))])])]}}])})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;D()(component,{VBtn:U.a,VCard:S.a,VCardActions:$.a,VCardText:$.b,VCardTitle:$.c,VCol:A.a,VContainer:V.a,VDataTable:O.a,VDatePicker:C.a,VDialog:T.a,VLayout:E.a,VRow:N.a,VSpacer:R.a,VTextField:j.a})}}]);